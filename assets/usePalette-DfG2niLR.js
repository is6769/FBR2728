import{r as d,c as w,w as D}from"./index-DHwcYlWL.js";function I(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function H(e,t,a){return"#"+[e,t,a].map(o=>{const l=Math.round(o).toString(16);return l.length===1?"0"+l:l}).join("").toUpperCase()}function U(e,t,a){e/=255,t/=255,a/=255;const o=Math.max(e,t,a),l=Math.min(e,t,a);let r,u,c=(o+l)/2;if(o===l)r=u=0;else{const s=o-l;switch(u=c>.5?s/(2-o-l):s/(o+l),o){case e:r=((t-a)/s+(t<a?6:0))/6;break;case t:r=((a-e)/s+2)/6;break;case a:r=((e-t)/s+4)/6;break}}return{h:r*360,s:u*100,l:c*100}}function Y(e,t,a){e/=360,t/=100,a/=100;let o,l,r;if(t===0)o=l=r=a;else{const u=(A,C,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?A+(C-A)*6*n:n<.5?C:n<.6666666666666666?A+(C-A)*(.6666666666666666-n)*6:A),c=a<.5?a*(1+t):a+t-a*t,s=2*a-c;o=u(s,c,e+1/3),l=u(s,c,e),r=u(s,c,e-1/3)}return{r:Math.round(o*255),g:Math.round(l*255),b:Math.round(r*255)}}function k(e){const t=I(e);return t?U(t.r,t.g,t.b):null}function R(e,t,a){const o=Y(e,t,a);return H(o.r,o.g,o.b)}function $(){const e="0123456789ABCDEF";let t="#";for(let a=0;a<6;a++)t+=e[Math.floor(Math.random()*16)];return t}function y(e=5,t=null){const a=t??Math.random()*360,o=[],l=.618033988749895;for(let r=0;r<e;r++){const u=(a+r*l*360)%360,c=55+Math.random()*30,s=45+Math.random()*25;o.push(R(u,c,s))}return o}const v={RANDOM:"random",ANALOGOUS:"analogous",MONOCHROMATIC:"monochromatic",TRIADIC:"triadic",COMPLEMENTARY:"complementary",SPLIT_COMPLEMENTARY:"split-complementary",TETRADIC:"tetradic"};function G(e,t,a=null){const o=a||$(),l=k(o);if(!l)return[o];const{h:r,s:u,l:c}=l,s=[];switch(e){case v.ANALOGOUS:for(let n=0;n<t;n++){const f=(n-Math.floor(t/2))*30;s.push(R((r+f+360)%360,u,c+(n%2===0?5:-5)))}break;case v.MONOCHROMATIC:for(let n=0;n<t;n++){const f=25+n*(50/(t-1||1)),p=u-n*5;s.push(R(r,Math.max(p,30),f))}break;case v.TRIADIC:for(let n=0;n<t;n++){const f=(r+n*120)%360,p=c+(n%2===0?0:10);s.push(R(f,u,p))}break;case v.COMPLEMENTARY:for(let n=0;n<t;n++){const f=n%2===0?r:(r+180)%360,p=c+(n%3*10-10);s.push(R(f,u,Math.max(30,Math.min(80,p))))}break;case v.SPLIT_COMPLEMENTARY:const C=[0,150,210];for(let n=0;n<t;n++){const f=C[n%C.length],p=(r+f)%360;s.push(R(p,u,c+(n*5-10)))}break;case v.TETRADIC:for(let n=0;n<t;n++){const f=(r+n*90)%360;s.push(R(f,u,c+(n%2===0?0:8)))}break;default:return y(t,r)}return s.slice(0,t)}const m={CALM:"calm",ENERGETIC:"energetic",PROFESSIONAL:"professional",PLAYFUL:"playful",NATURE:"nature",SUNSET:"sunset"};function J(e,t){const a={[m.CALM]:{hueRange:[180,240],satRange:[20,40],lightRange:[60,80]},[m.ENERGETIC]:{hueRange:[0,60],satRange:[70,95],lightRange:[50,65]},[m.PROFESSIONAL]:{hueRange:[200,230],satRange:[30,50],lightRange:[35,55]},[m.PLAYFUL]:{hueRange:[280,340],satRange:[60,85],lightRange:[55,75]},[m.NATURE]:{hueRange:[80,160],satRange:[40,70],lightRange:[40,65]},[m.SUNSET]:{hueRange:[0,45],satRange:[60,90],lightRange:[50,70]}},o=a[e]||a[m.CALM],l=[];for(let r=0;r<t;r++){const u=o.hueRange[0]+Math.random()*(o.hueRange[1]-o.hueRange[0]),c=o.satRange[0]+Math.random()*(o.satRange[1]-o.satRange[0]),s=o.lightRange[0]+Math.random()*(o.lightRange[1]-o.lightRange[0]);l.push(R(u,c,s))}return l}function P(e){const t=I(e);if(!t)return 0;const[a,o,l]=[t.r,t.g,t.b].map(r=>(r/=255,r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)));return .2126*a+.7152*o+.0722*l}function ae(e,t){const a=P(e),o=P(t),l=Math.max(a,o),r=Math.min(a,o);return(l+.05)/(r+.05)}function oe(e){return e>=7?{level:"AAA",text:"Отлично",class:"wcag-aaa"}:e>=4.5?{level:"AA",text:"Хорошо",class:"wcag-aa"}:e>=3?{level:"AA Large",text:"Крупный текст",class:"wcag-aa-large"}:{level:"Fail",text:"Недостаточно",class:"wcag-fail"}}function _(e){return P(e)<.5}function ne(e){return _(e)?"#FFFFFF":"#1A1A2E"}function re(e,t){switch(t){case"rgb":{const a=I(e);return a?`rgb(${a.r}, ${a.g}, ${a.b})`:e}case"hsl":{const a=k(e);return a?`hsl(${Math.round(a.h)}, ${Math.round(a.s)}%, ${Math.round(a.l)}%)`:e}default:return e}}function B(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const i=d([]),h=d(new Set),M=d(5),E=d("hex"),S=d(v.RANDOM),F=d(null),T=d(null),g=d([]),x=d("");function N(){try{const e=localStorage.getItem("palette-forge-state");if(e){const a=JSON.parse(e);a.colors&&(i.value=a.colors),a.lockedColors&&(h.value=new Set(a.lockedColors)),a.colorCount&&(M.value=a.colorCount),a.colorFormat&&(E.value=a.colorFormat),a.paletteType&&(S.value=a.paletteType),a.baseColor&&(T.value=a.baseColor)}const t=localStorage.getItem("palette-forge-saved");t&&(g.value=JSON.parse(t))}catch(e){console.warn("Failed to load from localStorage:",e)}}function b(){try{const e={colors:i.value,lockedColors:Array.from(h.value),colorCount:M.value,colorFormat:E.value,paletteType:S.value,baseColor:T.value};localStorage.setItem("palette-forge-state",JSON.stringify(e))}catch(e){console.warn("Failed to save to localStorage:",e)}}function O(){try{localStorage.setItem("palette-forge-saved",JSON.stringify(g.value))}catch(e){console.warn("Failed to save palettes:",e)}}function L(){let e=[];F.value?e=J(F.value,M.value):S.value!==v.RANDOM||T.value?e=G(S.value,M.value,T.value):e=y(M.value),i.value=e.map((t,a)=>h.value.has(a)&&i.value[a]?i.value[a]:t),b()}function j(e){h.value.has(e)?h.value.delete(e):h.value.add(e),h.value=new Set(h.value),b()}function W(e){return h.value.has(e)}function z(e,t){i.value[e]=t,b()}function K(e,t=[]){const a={id:B(),name:e||`Палитра ${g.value.length+1}`,colors:[...i.value],tags:t,createdAt:new Date().toISOString(),isFavorite:!1};return g.value.unshift(a),O(),a}function Q(e){i.value=[...e.colors],M.value=e.colors.length,h.value=new Set,x.value=e.name,b()}function V(e){g.value=g.value.filter(t=>t.id!==e),O()}function X(e,t){const a=g.value.findIndex(o=>o.id===e);a!==-1&&(g.value[a]={...g.value[a],...t},O())}function Z(e){const t=g.value.find(a=>a.id===e);t&&(t.isFavorite=!t.isFavorite,O())}const q=w(()=>i.value.length>0),ee=w(()=>g.value.filter(e=>e.isFavorite));D([M,E,S,T],()=>{b()});function le(){return i.value.length===0&&(N(),i.value.length===0&&L()),{colors:i,lockedColors:h,colorCount:M,colorFormat:E,paletteType:S,moodType:F,baseColor:T,savedPalettes:g,currentPaletteName:x,hasColors:q,favoritePalettes:ee,PALETTE_TYPES:v,MOOD_TYPES:m,generatePalette:L,toggleLock:j,isLocked:W,updateColor:z,savePalette:K,loadPalette:Q,deletePalette:V,updatePalette:X,toggleFavorite:Z,initFromStorage:N}}export{k as a,ae as b,oe as c,re as f,ne as g,I as h,le as u};
