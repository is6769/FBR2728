import{_ as U,r as m,c as j,b as l,e as t,l as b,y as f,h as y,t as d,k as w,g as C,F as g,j as _,p as K,d as i,f as q,n as $,B as M,u as I}from"./index-DHwcYlWL.js";import{u as Q,g as R}from"./usePalette-DfG2niLR.js";const G={class:"library-view"},J={class:"library-controls"},O={class:"search-box"},W={class:"filter-buttons"},X={key:0,class:"palettes-grid"},Y={class:"card-header"},Z={class:"card-title-row"},tt={class:"card-title"},et=["onClick","title"],st=["fill"],ot={class:"card-date"},nt=["onClick"],lt=["title"],it={key:0,class:"card-tags"},at={class:"card-actions"},rt=["onClick"],dt=["onClick"],ut=["onClick"],ct=["onClick"],vt={key:1,class:"edit-form"},ht={class:"form-group"},mt={class:"form-group"},yt={key:1,class:"empty-state"},gt={key:0},pt={key:1},kt={__name:"LibraryView",setup(bt){const{savedPalettes:x,loadPalette:T,deletePalette:F,toggleFavorite:P,updatePalette:D}=Q(),{showToast:p,copyToClipboard:A}=I(),a=m(""),u=m("all"),r=m(null),c=m(""),v=m(""),B=j(()=>{let o=x.value;if(u.value==="favorites"&&(o=o.filter(e=>e.isFavorite)),a.value.trim()){const e=a.value.toLowerCase();o=o.filter(s=>{var h;return s.name.toLowerCase().includes(e)||((h=s.tags)==null?void 0:h.some(n=>n.toLowerCase().includes(e)))||s.colors.some(n=>n.toLowerCase().includes(e))})}return o});function V(o){T(o),p(`Палитра "${o.name}" загружена`,"success")}function H(o){confirm(`Удалить палитру "${o.name}"?`)&&(F(o.id),p("Палитра удалена","success"))}function N(o){var e;r.value=o.id,c.value=o.name,v.value=((e=o.tags)==null?void 0:e.join(", "))||""}function k(){if(r.value){const o=v.value.split(",").map(e=>e.trim()).filter(Boolean);D(r.value,{name:c.value,tags:o}),p("Палитра обновлена","success"),L()}}function L(){r.value=null,c.value="",v.value=""}function z(o){const e=o.colors.join(", ");A(e,"Цвета скопированы!")}function E(o){return new Date(o).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"})}return(o,e)=>(i(),l("div",G,[e[15]||(e[15]=t("header",{class:"page-header"},[t("h1",null,"Библиотека палитр"),t("p",{class:"page-subtitle"},"Ваши сохранённые цветовые схемы")],-1)),t("div",J,[t("div",O,[e[5]||(e[5]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),type:"text",class:"input search-input",placeholder:"Поиск по названию, тегам или цветам..."},null,512),[[f,a.value]])]),t("div",W,[t("button",{class:y(["btn btn-sm",{"btn-primary":u.value==="all"}]),onClick:e[1]||(e[1]=s=>u.value="all")}," Все ("+d(w(x).length)+") ",3),t("button",{class:y(["btn btn-sm",{"btn-primary":u.value==="favorites"}]),onClick:e[2]||(e[2]=s=>u.value="favorites")},[...e[6]||(e[6]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"2"},[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})],-1),C(" Избранные ",-1)])],2)])]),B.value.length>0?(i(),l("div",X,[(i(!0),l(g,null,_(B.value,s=>{var h;return i(),l("div",{key:s.id,class:y(["palette-card",{"is-editing":r.value===s.id}])},[r.value!==s.id?(i(),l(g,{key:0},[t("div",Y,[t("div",Z,[t("h3",tt,d(s.name),1),t("button",{class:y(["favorite-btn",{active:s.isFavorite}]),onClick:n=>w(P)(s.id),title:s.isFavorite?"Убрать из избранного":"Добавить в избранное"},[(i(),l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:s.isFavorite?"currentColor":"none",stroke:"currentColor","stroke-width":"2"},[...e[7]||(e[7]=[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},null,-1)])],8,st))],10,et)]),t("span",ot,d(E(s.createdAt)),1)]),t("div",{class:"color-strip",onClick:n=>V(s)},[(i(!0),l(g,null,_(s.colors,(n,S)=>(i(),l("div",{key:S,class:"strip-color",style:$({background:n}),title:n},[t("span",{class:"color-label mono",style:$({color:w(R)(n)})},d(n),5)],12,lt))),128))],8,nt),(h=s.tags)!=null&&h.length?(i(),l("div",it,[(i(!0),l(g,null,_(s.tags,n=>(i(),l("span",{key:n,class:"tag"},d(n),1))),128))])):q("",!0),t("div",at,[t("button",{class:"btn btn-sm",onClick:n=>V(s)},[...e[8]||(e[8]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"16 3 21 3 21 8"}),t("line",{x1:"4",y1:"20",x2:"21",y2:"3"})],-1),C(" Загрузить ",-1)])],8,rt),t("button",{class:"btn btn-sm",onClick:n=>z(s)},[...e[9]||(e[9]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),C(" Копировать ",-1)])],8,dt),t("button",{class:"btn btn-sm",onClick:n=>N(s)},[...e[10]||(e[10]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 20h9"}),t("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})],-1)])],8,ut),t("button",{class:"btn btn-sm btn-danger",onClick:n=>H(s)},[...e[11]||(e[11]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,ct)])],64)):(i(),l("div",vt,[t("div",ht,[e[12]||(e[12]=t("label",{class:"control-label"},"Название",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>c.value=n),type:"text",class:"input w-full",onKeyup:M(k,["enter"])},null,544),[[f,c.value]])]),t("div",mt,[e[13]||(e[13]=t("label",{class:"control-label"},"Теги (через запятую)",-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>v.value=n),type:"text",class:"input w-full",onKeyup:M(k,["enter"])},null,544),[[f,v.value]])]),t("div",{class:"edit-actions"},[t("button",{class:"btn btn-sm",onClick:L},"Отмена"),t("button",{class:"btn btn-sm btn-primary",onClick:k},"Сохранить")])]))],2)}),128))])):(i(),l("div",yt,[e[14]||(e[14]=K('<div class="empty-icon" data-v-1e4cde91><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-1e4cde91><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" data-v-1e4cde91></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" data-v-1e4cde91></path><line x1="9" y1="10" x2="15" y2="10" data-v-1e4cde91></line></svg></div>',1)),t("h3",null,d(a.value?"Ничего не найдено":"Библиотека пуста"),1),a.value?(i(),l("p",pt,"Попробуйте изменить поисковый запрос")):(i(),l("p",gt,"Сохраните палитру из генератора, чтобы она появилась здесь"))]))]))}},Ct=U(kt,[["__scopeId","data-v-1e4cde91"]]);export{Ct as default};
