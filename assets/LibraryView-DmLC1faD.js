import{_ as U,r as b,c as j,b as l,e as t,l as k,y as f,h as m,t as d,k as w,g as C,F as y,j as _,p as K,d as i,f as q,n as $,B as M,u as I}from"./index-DrjFYKpa.js";import{u as Q,g as R}from"./usePalette-D81InWQL.js";const G={class:"library-view"},J={class:"library-controls"},O={class:"search-box"},W={class:"filter-buttons"},X={key:0,class:"palettes-grid"},Y={class:"card-header"},Z={class:"card-title-row"},tt={class:"card-title"},st=["onClick","title"],et=["fill"],ot={class:"card-date"},nt=["onClick"],lt=["title"],it={key:0,class:"card-tags"},at={class:"card-actions"},rt=["onClick"],dt=["onClick"],ut=["onClick"],ct=["onClick"],vt={key:1,class:"edit-form"},ht={class:"form-group"},bt={class:"form-group"},mt={key:1,class:"empty-state"},yt={key:0},gt={key:1},pt={__name:"LibraryView",setup(kt){const{savedPalettes:x,loadPalette:T,deletePalette:F,toggleFavorite:P,updatePalette:D}=Q(),{showToast:g,copyToClipboard:A}=I(),a=b(""),u=b("all"),r=b(null),c=b(""),v=b(""),B=j(()=>{let o=x.value;if(u.value==="favorites"&&(o=o.filter(s=>s.isFavorite)),a.value.trim()){const s=a.value.toLowerCase();o=o.filter(e=>{var h;return e.name.toLowerCase().includes(s)||((h=e.tags)==null?void 0:h.some(n=>n.toLowerCase().includes(s)))||e.colors.some(n=>n.toLowerCase().includes(s))})}return o});function V(o){T(o),g(`Палитра "${o.name}" загружена`,"success")}function H(o){confirm(`Удалить палитру "${o.name}"?`)&&(F(o.id),g("Палитра удалена","success"))}function N(o){var s;r.value=o.id,c.value=o.name,v.value=((s=o.tags)==null?void 0:s.join(", "))||""}function p(){if(r.value){const o=v.value.split(",").map(s=>s.trim()).filter(Boolean);D(r.value,{name:c.value,tags:o}),g("Палитра обновлена","success"),L()}}function L(){r.value=null,c.value="",v.value=""}function z(o){const s=o.colors.join(", ");A(s,"Цвета скопированы!")}function E(o){return new Date(o).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"})}return(o,s)=>(i(),l("div",G,[s[15]||(s[15]=t("header",{class:"page-header"},[t("h1",null,"Библиотека палитр"),t("p",{class:"page-subtitle"},"Ваши сохранённые цветовые схемы")],-1)),t("div",J,[t("div",O,[s[5]||(s[5]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),k(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),type:"text",class:"input search-input",placeholder:"Поиск по названию, тегам или цветам..."},null,512),[[f,a.value]])]),t("div",W,[t("button",{class:m(["btn btn-sm",{"btn-primary":u.value==="all"}]),onClick:s[1]||(s[1]=e=>u.value="all")}," Все ("+d(w(x).length)+") ",3),t("button",{class:m(["btn btn-sm",{"btn-primary":u.value==="favorites"}]),onClick:s[2]||(s[2]=e=>u.value="favorites")},[...s[6]||(s[6]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"2"},[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})],-1),C(" Избранные ",-1)])],2)])]),B.value.length>0?(i(),l("div",X,[(i(!0),l(y,null,_(B.value,e=>{var h;return i(),l("div",{key:e.id,class:m(["palette-card",{"is-editing":r.value===e.id}])},[r.value!==e.id?(i(),l(y,{key:0},[t("div",Y,[t("div",Z,[t("h3",tt,d(e.name),1),t("button",{class:m(["favorite-btn",{active:e.isFavorite}]),onClick:n=>w(P)(e.id),title:e.isFavorite?"Убрать из избранного":"Добавить в избранное"},[(i(),l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:e.isFavorite?"currentColor":"none",stroke:"currentColor","stroke-width":"2"},[...s[7]||(s[7]=[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},null,-1)])],8,et))],10,st)]),t("span",ot,d(E(e.createdAt)),1)]),t("div",{class:"color-strip",onClick:n=>V(e)},[(i(!0),l(y,null,_(e.colors,(n,S)=>(i(),l("div",{key:S,class:"strip-color",style:$({background:n}),title:n},[t("span",{class:"color-label mono",style:$({color:w(R)(n)})},d(n),5)],12,lt))),128))],8,nt),(h=e.tags)!=null&&h.length?(i(),l("div",it,[(i(!0),l(y,null,_(e.tags,n=>(i(),l("span",{key:n,class:"tag"},d(n),1))),128))])):q("",!0),t("div",at,[t("button",{class:"btn btn-sm",onClick:n=>V(e)},[...s[8]||(s[8]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"16 3 21 3 21 8"}),t("line",{x1:"4",y1:"20",x2:"21",y2:"3"})],-1),C(" Загрузить ",-1)])],8,rt),t("button",{class:"btn btn-sm",onClick:n=>z(e)},[...s[9]||(s[9]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),C(" Копировать ",-1)])],8,dt),t("button",{class:"btn btn-sm",onClick:n=>N(e)},[...s[10]||(s[10]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 20h9"}),t("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})],-1)])],8,ut),t("button",{class:"btn btn-sm btn-danger",onClick:n=>H(e)},[...s[11]||(s[11]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,ct)])],64)):(i(),l("div",vt,[t("div",ht,[s[12]||(s[12]=t("label",{class:"control-label"},"Название",-1)),k(t("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>c.value=n),type:"text",class:"input w-full",onKeyup:M(p,["enter"])},null,544),[[f,c.value]])]),t("div",bt,[s[13]||(s[13]=t("label",{class:"control-label"},"Теги (через запятую)",-1)),k(t("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>v.value=n),type:"text",class:"input w-full",onKeyup:M(p,["enter"])},null,544),[[f,v.value]])]),t("div",{class:"edit-actions"},[t("button",{class:"btn btn-sm",onClick:L},"Отмена"),t("button",{class:"btn btn-sm btn-primary",onClick:p},"Сохранить")])]))],2)}),128))])):(i(),l("div",mt,[s[14]||(s[14]=K('<div class="empty-icon" data-v-2d55801b><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-2d55801b><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" data-v-2d55801b></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" data-v-2d55801b></path><line x1="9" y1="10" x2="15" y2="10" data-v-2d55801b></line></svg></div>',1)),t("h3",null,d(a.value?"Ничего не найдено":"Библиотека пуста"),1),a.value?(i(),l("p",gt,"Попробуйте изменить поисковый запрос")):(i(),l("p",yt,"Сохраните палитру из генератора, чтобы она появилась здесь"))]))]))}},Ct=U(pt,[["__scopeId","data-v-2d55801b"]]);export{Ct as default};
